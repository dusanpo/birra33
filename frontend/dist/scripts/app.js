const baseUrl="https://api.punkapi.com/v2/beers?page=",cardWrapper=document.querySelector(".card-wrapper"),searchByName=document.getElementById("inp-search"),filterFood=document.getElementById("filter-food"),inputBrewedDates=document.querySelectorAll(".date-input"),scrollToTop=document.querySelector(".scroll-to-top"),pageNumber=document.getElementById("pageNumber"),prevPage=document.getElementById("prevPage"),nextPage=document.getElementById("nextPage");let foodPairing="",ABVmin="",ABVmax="",brewedAfter="",brewedBefore="",page=1,perPage="&per_page=12",minSlider=document.getElementById("min"),maxSlider=document.getElementById("max"),outputMin=document.getElementById("min-value"),outputMax=document.getElementById("max-value");async function fetchApi(e){let a;a=e?await fetch(`https://api.punkapi.com/v2/beers?beer_name=${e}`):foodPairing?await fetch(baseUrl+page+perPage+foodPairing):ABVmin?await fetch(baseUrl+page+perPage+ABVmin+ABVmax):await fetch(baseUrl+page+perPage+brewedAfter+brewedBefore);let t=await a.json();console.log(t),pageNumber.innerText=page,prevPage.disabled=1===page,t.length<12?nextPage.disabled=!0:nextPage.disabled=!1,cardWrapper.innerHTML="";let n="";t.map((e=>{const{image_url:a,abv:t,id:i,ph:d,name:r,first_brewed:s,description:c,food_pairing:o,brewers_tips:l}=e;n+=`\n    <div class="col-md-4">\n    <div class="card text-center border-0 cards">\n      <div class="card-body card-main" >\n        <img class="img" src=${a} alt="image"/>\n        <p class="beer-price">$${t}</p>\n        <div class="logo">\n          <i class="fa-solid fa-link fa-3x" id="${i}"></i>\n        </div>\n      </div>\n      <div class="card-footer card-bottom">\n        <h5>\n          <button class="w-100">Add to Card</button>\n        </h5>\n      </div>\n    </div>\n  </div>\n  <div class="modal-style" id="modal-${i}">\n    <div class="modal-content">\n      <div class="header-modal">\n        <span class="close-modal" id="close-${i}">&times;</span>\n        <div class="d-flex justify-content-between header-content">\n          <h3 class="header-title">Ab: ${d}</h3>\n          <p class="header-name">${r}</p>\n        </div>\n      </div>\n      <hr />\n      <div class="body-modal">\n        <p>\n          With us since: <span class="date-text">${s}</span>\n        </p>\n        <p class="description-text">${c}</p>\n        <p>It goes great width:</p>\n        <p class="food-pairing-text">${o.join(", ")}</p>\n      </div>\n      <hr />\n      <div class="footer-modal">\n        <div class="row">\n          <div class="col-lg-3">\n            <p>\n              Abv:<br />\n              <span class="result-text">${t}</span>\n            </p>\n          </div>\n          <div class="col-lg-9">\n            <p>\n              And Our tip:\n              <span class="tips-text">${l}</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n    `,cardWrapper.classList.remove("not-found")})),0===t.length&&(n="Sorry, we don't have such a beer!",cardWrapper.classList.add("not-found")),cardWrapper.innerHTML=n}async function feetchBeer(e){let a;a=await fetch(`https://api.punkapi.com/v2/beers/${e}`);let t=await a.json();console.log(t)}outputMin.innerHTML=minSlider.value,outputMax.innerHTML=maxSlider.value,minSlider.oninput=function(){outputMin.innerHTML=this.value},maxSlider.oninput=function(){outputMax.innerHTML=this.value},cardWrapper.addEventListener("click",(e=>{const a=e.target.getAttribute("id");let t=document.getElementById(`modal-${a}`);t.style.display="block",document.getElementById(`close-${a}`).addEventListener("click",(function(){t.style.display="none"})),feetchBeer(a)})),searchByName.addEventListener("change",(()=>{fetchApi(searchByName.value.trim()),searchByName.value=""})),filterFood.addEventListener("change",(e=>{switch(e.target.value){case"all":foodPairing="";break;case"chicken":foodPairing="&food=chicken";break;case"cake":foodPairing="&food=cake";break;case"cheese":foodPairing="&food=cheese";break;case"salad":foodPairing="&food=salad"}page=1,fetchApi()})),[minSlider,maxSlider].forEach((e=>{e.addEventListener("change",(()=>{let e=minSlider.value,a=maxSlider.value;ABVmin="&abv_gt="+e,ABVmax="&abv_lt="+a,page=1,fetchApi()}))})),inputBrewedDates.forEach((e=>{e.addEventListener("change",(e=>{let a=e.target.value,t=`${a.substring(5,7)}-${a.substring(0,4)}`;"after"===e.target.id?brewedAfter="&brewed_after="+t:brewedBefore="&brewed_before="+t,page=1,fetchApi()}))})),prevPage.addEventListener("click",(()=>{page--,fetchApi()})),nextPage.addEventListener("click",(()=>{page++,fetchApi()})),fetchApi(),window.addEventListener("scroll",(()=>{window.pageYOffset>100?scrollToTop.classList.add("active"):scrollToTop.classList.remove("active")}));